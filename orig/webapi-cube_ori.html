<html>
<head>
    <meta name="transparent" content="true">

    <style>
        html * {
            font-size: 48px;
        }

        .center {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 400px;
            border: 3px solid blue;
        }
    </style>


    <script type="text/javascript">
        function randomSpherePoint() {
            var u = Math.random();
            var v = Math.random();
            var theta = 2 * Math.PI * u;
            var phi = Math.acos(2 * v - 1);
            var x = Math.sin(phi) * Math.cos(theta);
            var y = Math.sin(phi) * Math.sin(theta);
            var z = Math.cos(phi);
            return [x, y, z];
        }

        var cube_index = 0;

        function spawnCube() {

            var rpos = randomSpherePoint();
            var radius = Math.random() * 2;
            rpos = rpos.map(v => v * radius);

            var id = 'cube_' + cube_index++; 

            window.vuplex.postMessage(
                {
                    action: 'create-primitive',
                    id: id,
                    primitive: 'cube',
                    position: { x: rpos[0], y: rpos[1], z: rpos[2] },
                    rotation: { x: 45, y: 0, z: 0 },
                    scale: { x: 0.5, y: 0.5, z: 0.5}
                }
            );
        }
    </script>

</head>
<body>
    <div class="center">
        <button onclick="spawnCube()">Spawn Cube</button>
    </div>
</body>
</html>